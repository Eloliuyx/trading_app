[tool.ruff]
line-length = 100
target-version = "py311"
# 统一只出现一次 exclude，避免 duplicate key
exclude = [
  "venv",
  ".venv",
  "out",
  "backend/legacy/chan",
  "node_modules",
  "frontend/node_modules",
  "dist",
  "build",
  ".git",
  ".mypy_cache",
  ".ruff_cache",
]

[tool.ruff.lint]
select = ["E", "F", "W", "I"]   # 基础规则 + import 排序
ignore = []

[tool.black]
line-length = 100
target-version = ["py311"]
# Black 用正则语法；注意用单引号包裹
exclude = '''
/(
  \.venv
 | venv
 | out
 | backend/legacy/chan
 | node_modules
 | frontend/node_modules
 | dist
 | build
 | \.git
 | \.mypy_cache
 | \.ruff_cache
)/
'''

[tool.mypy]
python_version = "3.13"
# 先排除 legacy 与旧 cli，避免老依赖/类型报错
exclude = '(backend/legacy/chan/|backend/core/cli\.py)'
# 先宽松通过：忽略三方包缺少 stubs & 跳过导入跟踪
ignore_missing_imports = true
follow_imports = "skip"
warn_unused_ignores = false
warn_redundant_casts = false
warn_no_return = false
no_implicit_optional = false
